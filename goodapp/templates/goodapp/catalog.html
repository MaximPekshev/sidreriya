{% extends 'baseapp/index.html' %}

{% load static %}

{% block content %}
<div class="main-container no-sidebar">
	<div class="container">
		<div class="row">
			<div class="col-sm-12 main-content">
				<div class="shop-page-bar">
					<nav class="woocommerce-breadcrumb breadcrumbs">
						<a href="{% url 'show_index' %}">На главную</a>
						<a href="{% url 'show_catalog' %}">Каталог</a>
						{% if category %}
						<a href="{% url 'show_category' slug=category.slug %}">{{ category.name }}</a>
						{% endif %}
						{% if manufacturer %}
						<a href="{% url 'show_manufacturer' slug=manufacturer.slug %}">{{ manufacturer.name }}</a>
						{% endif %}
					</nav>
				</div>
				<ul class="products product-list-grid desktop-columns-4 tablet-columns-3 mobile-columns-2">
					{% for item in page_object.object_list %}
					<li class="product-item col-md-3 col-sm-4 col-xs-6">
						<div class="product-inner">
							<div class="thumb has-second-image">
								<a href="{% url 'show_good' slug=item.good.slug %}">
									{% if item.image %}
									<img src="{{ item.image.images.url }}" alt="">
									{% else %}
									<img src="{% static 'images/products/no-photo.png' %}" alt="">
									{% endif %}
								</a>
							</div>
							<div class="info">
								<h3 class="product-name short"><a href="{% url 'show_good' slug=item.good.slug %}">{{ item.good.name }} / {{ item.good.name_en }}</a></h3>
								{% if item.good.price %}
								<span class="price">&#8381 {{ item.good.price }}</span>
								{% else %}
								<span class="price">&#8381 0</span>
								{% endif %}
							</div>
						</div>
					</li>
					{% endfor %}
				</ul>
				{% if is_paginated %}
				<nav class="woocommerce-pagination navigation">
					<ul class="page-numbers">
						<li><a class="next page-numbers" href="{{ prev_url }}"><i class="fa fa-long-arrow-left"></i></a></li>
						{% for n in page_object.paginator.page_range %}
	                        {% if page_object.number == n %}
								<li><span class="page-numbers current"><a href="?page={{ n }}">{{ n }}</a></span></li>
							{% elif n > page_object.number|add:-3 and n < page_object.number|add:3 %}
								<li><a class="page-numbers" href="?page={{ n }}">{{ n }}</a></li>
							{% endif %}
                    	{% endfor %}
						<li><a class="next page-numbers" href="{{ next_url }}"><i class="fa fa-long-arrow-right"></i></a></li>
					</ul>
				</nav>
				{% endif %}
			</div>
		</div>
	</div>
</div>
{% endblock %}